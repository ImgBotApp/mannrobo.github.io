$nav-height: 54px;

header {
    background-color: $blue;
    position: relative;

    height: 70vh;
    margin-bottom: -148px;
    @include break($break-tablet) {
        margin-bottom: -200px;
        height: 80vh;   
    };
    @include break($break-desktop) {
        height: 90vh;
    }
    @media (max-height: 900px) {
        margin-bottom: -48px !important;
        height: 106vh;
    }
    @include slant();

    z-index: -1;
    
    .bg {
        width: 100vw;
        height: 100%; 
        overflow: hidden;
        position: absolute;
        top: 0;
        bottom: 0;
        z-index: -1;
        img {
            top: -25%;
            position: absolute;
            min-width: 100%;
            min-height: 130%; // Sometimes the header is wierd, make sure we're big enough to expand to it
            filter: brightness(50%);
            transition: 1s opacity ease-in-out 0s;
            &.top { 
                opacity: 1;
                &.step {
                    opacity: 0;
                }
            }
            &.bottom {
                opacity: 0;
                &.step {
                    opacity: 1;
                }
            }
        };
    }
}

// Collapsable Menu System
header nav {
    top: 0;
    position: absolute;
    width: 100%;
    @include break($break-tablet) {
        display: flex;
        align-items: center;
    }
    &.fixed {
        position: fixed;
        background: $white;
        margin: 0;
        height: 64px;
        z-index: 99;
        @include drop-shadow();
        span.burger, span.burger::before, span.burger::after {
            background: $blue !important;
        }
        ul.links.active {
            margin-top: -16px !important;
        }
        ul li a {
            color: rgba($blue, 0.5) !important;
            &::before {
                background-color: rgba($blue, 0.5) !important;
            }
            &:hover, &:active, &.active {
                color: $blue !important;
            }
        }
    }
    .logo-box {
        display: inline-block;
        margin: 16px;
        @include break($break-tablet) {
            margin-left: 48px;
        }
        img { 
            height: 39px;
        }
    }        
    ul.links {
        list-style: none;
        position: relative;
        transition: $transition;
        margin-left: auto;
        @media (max-width: $break-tablet) {
            opacity: 0;
            li { display: none }
            &.active {
                opacity: 1;
                height: auto;
                display: flex;
                flex-direction: column;
                background: $white;
                padding-top: 16px;
                @include drop-shadow();
                li a::before { 
                    display: none;
                }
                li a {
                    color: $grey3;
                    &:hover, &:active, &.active {
                        color: $blue;
                    }
                }

            }
        }
        @include break($break-tablet) {
            display: inline-flex;
            float: right;
            margin-right: 32px;
            height: $nav-height;
        }
        li {
            display: inline-block;
            margin: 16px;
            position: relative;
        }
        li a { 
            color: rgba($white, 0.5);
            text-decoration: none;
            font-size: 19px;
            font-weight: 300;
            &:hover, &:active, &.active {
                color: $white;
                &::before {
                    transform: scaleX(1);
                    visibility: visible;
                }
            }
            &::before {
                content: "";
                position: absolute;
                width: 100%;
                height: 2px;
                bottom: -10px;
                left: 0;
                background-color: rgba($white, 0.5);
                visibility: hidden;
                transform: scaleX(0);
                transition: $transition;
            }
        }
    }

}

// Hamburger
header nav a.hamburger {
    @include break($break-tablet) { display: none }
    float: right;
    height: $nav-height;
    position: relative;
    top: $nav-height / 2 + 5px;
    width: 32px;
    margin-right: 32px;
    span.burger { transition: $transition };
    &:hover {
        span.burger::before { top: -14px }
        span.burger::after { top: 14px }
    }
    &.active span.burger {
        width: 0;
        &::before { 
            transform: rotate(45deg);
            top: 0px;
        }
        &::after { 
            transform: rotate(-45deg);
            top: 0px;
        }
    }
}

header nav a.hamburger span.burger {
    width: 32px;
    height: 3px;
    background: $white;
    position: absolute;
    &::before, &::after {
        background: $white;
        content: "";
        height: 3px;
        width: 32px;
        position: absolute;
        transition: $transition;
        transform: rotate(0deg);
    }
    &::before { top: -10px }
    &::after { top: 10px }
}

// Hero
header { display: flex; flex-direction: column; justify-content: center; }

header .hero {
    text-align: center;
    align-self: center;

    margin: 0 auto;
    padding: 16px;
    z-index: 1;

    max-width: $break-phone;
    @include break($break-tablet) {
        max-width: $break-tablet;
    }

    h1 {
        font-size: 50px;
        margin: 0 0 20px 0;
        color: white;
    }
    h2 {
        font-size: 28px;
        line-height: 38px;
        font-weight: 300;
        color: rgba(255, 255, 255, 0.8);
        margin: 0;
    }
}